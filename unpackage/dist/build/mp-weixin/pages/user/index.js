"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/store.js");Math||n();const n=()=>"../../components/CustomTabBar.js",a={__name:"index",setup(n){const a=e.ref({list:[],currentId:""}),i=e.ref(""),r=e.computed((()=>(a.value.list||[]).filter((e=>"Guest"!==String(e.name||"")))));function s(){a.value=t.getUsers()}function c(){t.addUser(i.value.trim()||void 0),i.value="",s()}function o(e){if(!e)return"U";const t=String(e).trim();return t.length?t[0].toUpperCase():"U"}return e.onMounted((()=>{try{e.index.hideTabBar&&e.index.hideTabBar()}catch(n){}t.ensureInit(),a.value=t.getUsers()})),(n,d)=>({a:i.value,b:e.o((e=>i.value=e.detail.value)),c:e.o(c),d:e.f(r.value,((n,i,r)=>e.e({a:n.avatar},n.avatar?{b:n.avatar}:{c:e.t(o(n.name)),d:n.color||"#e2e8f0"},{e:e.t(n.name),f:e.o((a=>function(n){t.switchUser(n),s();try{e.index.reLaunch({url:"/pages/index/index"})}catch(a){try{e.index.navigateTo({url:"/pages/index/index"})}catch(i){}}}(n.id)),n.id),g:e.o((a=>function(n){e.index.showModal({title:"改名",editable:!0,placeholderText:n.name,success(e){e.confirm&&(t.renameUser(n.id,e.content||n.name),s())}})}(n)),n.id),h:e.o((a=>function(n){try{e.index.showActionSheet({itemList:["从相册选择","移除头像","取消"],success(a){const i=a.tapIndex;0===i?e.index.chooseImage({count:1,sizeType:["compressed"],success(e){const a=e.tempFilePaths&&e.tempFilePaths[0]||"";t.setUserAvatar(n.id,a),s()}}):1===i&&(t.setUserAvatar(n.id,""),s())}})}catch(a){}}(n)),n.id),i:e.o((a=>{return i=n.id,void e.index.showModal({title:"删除用户",content:"确定删除该用户？",success(e){e.confirm&&(t.removeUser(i),s())}});var i}),n.id),j:n.id,k:n.id===a.value.currentId?1:""})))})}},i=e._export_sfc(a,[["__scopeId","data-v-0c768f33"]]);wx.createPage(i);
