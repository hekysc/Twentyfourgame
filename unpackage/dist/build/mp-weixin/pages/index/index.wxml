<view class="{{['page', 'col', 'data-v-1cf27b2a', az && 'booted']}}" style="{{aA}}" bindtouchstart="{{aB}}" bindtouchmove="{{aC}}" bindtouchend="{{aD}}" bindtouchcancel="{{aE}}">
  <view id="gameTopBox" class="game-header top-fixed data-v-1cf27b2a">
    <view class="topbar data-v-1cf27b2a">
      <view class="user-chip data-v-1cf27b2a" hover-class="user-chip-hover" bindtap="{{g}}">
        <block wx:if="{{a}}">
          <image class="user-chip-avatar data-v-1cf27b2a" src="{{b}}" mode="aspectFill" binderror="{{c}}" />
        </block>
        <view wx:else class="user-chip-fallback data-v-1cf27b2a" style="{{'background-color:' + e}}">{{d}}</view><text class="user-chip-name data-v-1cf27b2a">{{f}}</text>
      </view>
    </view>
    <view class="mode-bar data-v-1cf27b2a"><button class="{{['btn', 'mode-toggle-btn', 'data-v-1cf27b2a', i]}}" bindtap="{{j}}">{{h}}</button>
      <view class="data-v-1cf27b2a" style="flex:1"><button class="btn btn-secondary deck-toggle-btn data-v-1cf27b2a" bindtap="{{l}}">{{k}}</button></view>
    </view>
    <view id="statsRow" class="card section stats-compact-table stats-card data-v-1cf27b2a">
      <view class="thead data-v-1cf27b2a"><text class="th data-v-1cf27b2a">剩余</text><text class="th data-v-1cf27b2a">局数</text><text class="th ok data-v-1cf27b2a">成功</text><text class="th fail data-v-1cf27b2a">失败</text><text class="th data-v-1cf27b2a">胜率</text><text class="th data-v-1cf27b2a">上一局</text><text class="th data-v-1cf27b2a">本局</text></view>
      <view class="tbody data-v-1cf27b2a"><text class="td data-v-1cf27b2a">{{m}}</text><text class="td data-v-1cf27b2a">{{n}}</text><text class="td ok data-v-1cf27b2a">{{o}}</text><text class="td fail data-v-1cf27b2a">{{p}}</text><text class="td data-v-1cf27b2a">{{q}}%</text><text class="td data-v-1cf27b2a">{{r}}</text>
        <view class="td timer-cell data-v-1cf27b2a" id="timerCell" bindtap="{{w}}">
          <block wx:if="{{s}}"><text class="data-v-1cf27b2a">{{t}}</text></block>
          <block wx:else><button class="btn btn-secondary btn-reshuffle data-v-1cf27b2a" catchtap="{{v}}">洗牌</button></block>
        </view>
      </view>
    </view>
  </view>
  <view class="game-middle data-v-1cf27b2a" style="{{'height:' + X}}">
    <view class="mode-panels data-v-1cf27b2a">
      <!-- 互斥渲染：同一时间只挂载一个面板 -->
      <view wx:if="{{Q}}" class="pro-mode mode-panel data-v-1cf27b2a">
        <view id="cardGrid" class="card-grid data-v-1cf27b2a" style="padding-top:0rpx">
          <view wx:for="{{x}}" wx:for-item="card" wx:key="c" class="{{['playing-card', 'data-v-1cf27b2a', card.d && 'used']}}" catchtouchstart="{{card.e}}" catchtouchmove="{{card.f}}" catchtouchend="{{card.g}}">
            <playing-card wx:if="{{card.b}}" class="playing-card-visual data-v-1cf27b2a" u-i="{{card.a}}" bind:__l="__l" u-p="{{card.b}}" />
          </view>
        </view>
        <view id="opsRow1" class="{{['data-v-1cf27b2a', 'ops-row-1', z]}}"><button wx:for="{{y}}" wx:for-item="op" wx:key="b" class="btn btn-operator data-v-1cf27b2a" catchtouchstart="{{op.c}}" catchtouchmove="{{op.d}}" catchtouchend="{{op.e}}">{{op.a}}</button></view>
        <view id="opsRow2" class="{{['data-v-1cf27b2a', 'ops-row-2', D]}}">
          <view class="ops-left data-v-1cf27b2a"><button wx:for="{{A}}" wx:for-item="op" wx:key="b" class="btn btn-operator data-v-1cf27b2a" catchtouchstart="{{op.c}}" catchtouchmove="{{op.d}}" catchtouchend="{{op.e}}">{{op.a}}</button></view><button class="btn btn-secondary mode-btn data-v-1cf27b2a" bindtap="{{C}}">{{B}}</button>
        </view>
        <view wx:if="{{E}}" class="drag-ghost data-v-1cf27b2a" style="{{G}}">{{F}}</view>
        <view class="expr-card card section data-v-1cf27b2a">
          <view id="exprZone" class="{{['expr-zone', 'data-v-1cf27b2a', N && 'expr-zone-active', O && 'empty']}}" style="{{'height:' + P}}">
            <view wx:if="{{H}}" class="expr-override data-v-1cf27b2a">{{I}}</view>
            <view id="exprRow" class="row expr-row data-v-1cf27b2a" style="{{'transform:' + M + ';' + ('transform-origin:' + 'left center')}}">
              <block wx:for="{{J}}" wx:for-item="t" wx:key="l">
                <view wx:if="{{t.a}}" class="{{['insert-placeholder', 'data-v-1cf27b2a', t.b]}}"></view>
                <view class="{{['tok', 'data-v-1cf27b2a', t.g, t.h]}}" catchtouchstart="{{t.i}}" catchtouchmove="{{t.j}}" catchtouchend="{{t.k}}">
                  <playing-card wx:if="{{t.c}}" class="tok-card-visual data-v-1cf27b2a" u-i="{{t.d}}" bind:__l="__l" u-p="{{t.e}}" /><text wx:else class="tok-op-text data-v-1cf27b2a">{{t.f}}</text>
                </view>
              </block>
              <view wx:if="{{K}}" class="{{['insert-placeholder', 'data-v-1cf27b2a', L]}}"></view>
            </view>
          </view>
        </view>
      </view>
      <view wx:elif="{{W}}" class="basic-mode mode-panel data-v-1cf27b2a">
        <view class="basic-board data-v-1cf27b2a">
          <view class="basic-column data-v-1cf27b2a">
            <view wx:for="{{R}}" wx:for-item="i" wx:key="h" class="basic-card-wrapper data-v-1cf27b2a">
              <view class="{{['data-v-1cf27b2a', 'basic-card', i.f]}}" bindtap="{{i.g}}">
                <playing-card wx:if="{{i.a}}" class="basic-card-visual data-v-1cf27b2a" u-i="{{i.b}}" bind:__l="__l" u-p="{{i.c}}" />
                <view wx:elif="{{i.d}}" class="basic-card-value data-v-1cf27b2a"><text class="basic-card-value-text data-v-1cf27b2a">{{i.e}}</text></view>
              </view>
            </view>
          </view>
          <view class="basic-ops data-v-1cf27b2a"><button wx:for="{{S}}" wx:for-item="op" wx:key="b" class="{{['btn', 'btn-operator', 'data-v-1cf27b2a', op.c && 'active']}}" bindtap="{{op.d}}">{{op.a}}</button><button class="btn btn-secondary mode-btn basic-face-toggle data-v-1cf27b2a" bindtap="{{U}}">{{T}}</button></view>
          <view class="basic-column data-v-1cf27b2a">
            <view wx:for="{{V}}" wx:for-item="i" wx:key="h" class="basic-card-wrapper data-v-1cf27b2a">
              <view class="{{['data-v-1cf27b2a', 'basic-card', i.f]}}" bindtap="{{i.g}}">
                <playing-card wx:if="{{i.a}}" class="basic-card-visual data-v-1cf27b2a" u-i="{{i.b}}" bind:__l="__l" u-p="{{i.c}}" />
                <view wx:elif="{{i.d}}" class="basic-card-value data-v-1cf27b2a"><text class="basic-card-value-text data-v-1cf27b2a">{{i.e}}</text></view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <view id="gameBottomBox" class="game-footer bottom-fixed data-v-1cf27b2a">
    <view wx:if="{{Q}}" id="submitRow" class="footer-row data-v-1cf27b2a">
      <button hidden="{{!Y}}" class="btn btn-primary footer-primary-btn data-v-1cf27b2a" bindtap="{{Z}}">提交答案</button>
    </view>
    <view wx:elif="{{W}}" hidden="{{!ad}}" class="basic-utility-grid data-v-1cf27b2a"><button class="btn btn-secondary data-v-1cf27b2a" disabled="{{aa}}" bindtap="{{ab}}">后退</button><button class="btn btn-secondary data-v-1cf27b2a" bindtap="{{ac}}">重置</button>
    </view>
    <view id="failRow" class="footer-row data-v-1cf27b2a">
      <view wx:if="{{Q}}" class="pair-grid footer-pair data-v-1cf27b2a" hidden="{{!ag}}">
        <button class="btn btn-secondary data-v-1cf27b2a" bindtap="{{ae}}">提示</button>
        <button class="btn btn-secondary data-v-1cf27b2a" bindtap="{{af}}">下一题</button>
      </view>
      <view wx:elif="{{W}}" class="pair-grid footer-pair data-v-1cf27b2a" hidden="{{!aj}}">
        <button class="btn btn-secondary data-v-1cf27b2a" bindtap="{{ah}}">提示</button>
        <button class="btn btn-secondary data-v-1cf27b2a" bindtap="{{ai}}">下一题</button>
      </view>
    </view>
  </view>
  <view wx:if="{{ak}}" class="success-overlay data-v-1cf27b2a">
    <view class="success-burst data-v-1cf27b2a">24!</view>
  </view>
  <view wx:if="{{al}}" class="success-overlay data-v-1cf27b2a">
    <view class="error-burst data-v-1cf27b2a"><text class="err-title data-v-1cf27b2a">计算错误</text><text wx:if="{{am}}" class="err-val data-v-1cf27b2a">{{an}}</text></view>
  </view>
  <view wx:if="{{ao}}" class="timer-popover-layer data-v-1cf27b2a" bindtap="{{as}}">
    <view class="timer-popover data-v-1cf27b2a" style="{{aq}}" catchtap="{{ar}}"><button class="timer-popover-item data-v-1cf27b2a" bindtap="{{ap}}">重新发牌</button></view>
  </view>
  <view wx:if="{{at}}" class="{{['floating-hint-layer', 'data-v-1cf27b2a', ax && 'interactive']}}" bindtap="{{ay}}">
    <view class="floating-hint data-v-1cf27b2a" catchtap="{{aw}}">{{av}}</view>
  </view>
  <custom-tab-bar class="data-v-1cf27b2a" u-i="1cf27b2a-4" bind:__l="__l"></custom-tab-bar>
</view>